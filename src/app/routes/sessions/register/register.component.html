<div class="d-flex w-full h-full">
  <mat-card class="m-auto register-card">
    <mat-card-header class="m-b-24">
      <mat-card-title>
        {{ 'register_welcome' | translate }}, <br />
        {{ 'register_title' | translate }}
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="registerForm">
        <mat-stepper #stepper linear>
          <!-- Step 1: Personal -->
          <mat-step [stepControl]="personal" [label]="'register.step_personal' | translate">
            <ng-template matStepLabel>{{ 'register.step_personal' | translate }}</ng-template>
            <div class="form-field-full register-step" formGroupName="personal">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.firstName' | translate }}</mat-label>
                <input matInput formControlName="firstName" />
                <mat-error *ngIf="personal.get('firstName')?.invalid">
                  <span *ngIf="personal.get('firstName')?.errors?.['required']">{{ 'validations.required' | translate }}</span>
                  <span *ngIf="personal.get('firstName')?.errors?.['remote']">{{ personal.get('firstName')?.errors?.['remote'] }}</span>
                  <span *ngIf="personal.get('firstName')?.errors?.['minlength']">{{ 'validations.minlength' | translate:{ number: 2 } }}</span>
                  <span *ngIf="personal.get('firstName')?.errors?.['maxlength']">{{ 'validations.maxlength' | translate:{ number: 50 } }}</span>
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.lastName' | translate }}</mat-label>
                <input matInput formControlName="lastName" />
                <mat-error *ngIf="personal.get('lastName')?.invalid">
                  <span *ngIf="personal.get('lastName')?.errors?.['required']">{{ 'validations.required' | translate }}</span>
                  <span *ngIf="personal.get('lastName')?.errors?.['remote']">{{ personal.get('lastName')?.errors?.['remote'] }}</span>
                  <span *ngIf="personal.get('lastName')?.errors?.['minlength']">{{ 'validations.minlength' | translate:{ number: 2 } }}</span>
                  <span *ngIf="personal.get('lastName')?.errors?.['maxlength']">{{ 'validations.maxlength' | translate:{ number: 50 } }}</span>
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.birthDate' | translate }}</mat-label>
                <input matInput type="date" formControlName="birthDate" />
                <mat-error *ngIf="personal.get('birthDate')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.gender' | translate }}</mat-label>
                <mat-select formControlName="gender">
                  <mat-option value="MALE">{{ 'register.gender_MALE' | translate }}</mat-option>
                  <mat-option value="FEMALE">{{ 'register.gender_FEMALE' | translate }}</mat-option>
                  <mat-option value="OTHER">{{ 'register.gender_OTHER' | translate }}</mat-option>
                </mat-select>
                <mat-error *ngIf="personal.get('gender')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.nationalId' | translate }}</mat-label>
                <input matInput formControlName="nationalId" maxlength="8" />
                <mat-hint>8 {{ 'register.digits' | translate }}</mat-hint>
                <mat-error *ngIf="personal.get('nationalId')?.invalid">
                  <span *ngIf="personal.get('nationalId')?.errors?.['required']">{{ 'validations.required' | translate }}</span>
                  <span *ngIf="personal.get('nationalId')?.errors?.['pattern']">{{ 'register.nationalId_pattern' | translate }}</span>
                  <span *ngIf="personal.get('nationalId')?.errors?.['remote']">{{ personal.get('nationalId')?.errors?.['remote'] }}</span>
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.nationality' | translate }}</mat-label>
                <input matInput formControlName="nationality" />
                <mat-error *ngIf="personal.get('nationality')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.maritalStatus' | translate }}</mat-label>
                <mat-select formControlName="maritalStatus">
                  <mat-option value="SINGLE">{{ 'register.marital_SINGLE' | translate }}</mat-option>
                  <mat-option value="MARRIED">{{ 'register.marital_MARRIED' | translate }}</mat-option>
                  <mat-option value="DIVORCED">{{ 'register.marital_DIVORCED' | translate }}</mat-option>
                  <mat-option value="WIDOWED">{{ 'register.marital_WIDOWED' | translate }}</mat-option>
                </mat-select>
                <mat-error *ngIf="personal.get('maritalStatus')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
            </div>
            <div class="stepper-actions">
              <button mat-button matStepperNext type="button">{{ 'register.next' | translate }}</button>
            </div>
          </mat-step>

          <!-- Step 2: Professional -->
          <mat-step [stepControl]="professional" [label]="'register.step_professional' | translate">
            <ng-template matStepLabel>{{ 'register.step_professional' | translate }}</ng-template>
            <div class="form-field-full register-step" formGroupName="professional">
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.email' | translate }}</mat-label>
                <input matInput type="email" formControlName="email" />
                <mat-error *ngIf="professional.get('email')?.invalid">
                  <span *ngIf="professional.get('email')?.errors?.['required']">{{ 'validations.required' | translate }}</span>
                  <span *ngIf="professional.get('email')?.errors?.['email']">{{ 'validations.invalid_email' | translate }}</span>
                  <span *ngIf="professional.get('email')?.errors?.['remote']">{{ professional.get('email')?.errors?.['remote'] }}</span>
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.phone' | translate }}</mat-label>
                <input matInput formControlName="phone" maxlength="8" />
                <mat-hint>8 {{ 'register.digits' | translate }}</mat-hint>
                <mat-error *ngIf="professional.get('phone')?.invalid">
                  <span *ngIf="professional.get('phone')?.errors?.['required']">{{ 'validations.required' | translate }}</span>
                  <span *ngIf="professional.get('phone')?.errors?.['pattern']">{{ 'register.phone_pattern' | translate }}</span>
                  <span *ngIf="professional.get('phone')?.errors?.['remote']">{{ professional.get('phone')?.errors?.['remote'] }}</span>
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.address' | translate }}</mat-label>
                <input matInput formControlName="address" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.jobTitle' | translate }}</mat-label>
                <input matInput formControlName="jobTitle" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.department' | translate }}</mat-label>
                <mat-select formControlName="department">
                  <mat-option *ngFor="let d of departments" [value]="d">{{ d }}</mat-option>
                </mat-select>
                <mat-error *ngIf="professional.get('department')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.service' | translate }}</mat-label>
                <input matInput formControlName="service" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.hireDate' | translate }}</mat-label>
                <input matInput type="date" formControlName="hireDate" />
                <mat-error *ngIf="professional.get('hireDate')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.contractType' | translate }}</mat-label>
                <mat-select formControlName="contractType">
                  <mat-option *ngFor="let c of contractTypes" [value]="c">{{ c }}</mat-option>
                </mat-select>
                <mat-error *ngIf="professional.get('contractType')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.contractEndDate' | translate }}</mat-label>
                <input matInput type="date" formControlName="contractEndDate" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.baseSalary' | translate }}</mat-label>
                <input matInput type="number" formControlName="baseSalary" min="0" step="0.01" />
                <mat-error *ngIf="professional.get('baseSalary')?.invalid">{{ 'validations.required' | translate }}</mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.housingAllowance' | translate }}</mat-label>
                <input matInput type="number" formControlName="housingAllowance" min="0" step="0.01" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.evaluationScore' | translate }}</mat-label>
                <input matInput type="number" formControlName="evaluationScore" min="0" max="5" />
                <mat-hint>0-5</mat-hint>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.socialSecurityNumber' | translate }}</mat-label>
                <input matInput formControlName="socialSecurityNumber" maxlength="10" />
                <mat-hint>10 {{ 'register.digits' | translate }}</mat-hint>
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>{{ 'register.childrenCount' | translate }}</mat-label>
                <input matInput type="number" formControlName="childrenCount" min="0" />
              </mat-form-field>
              <mat-slide-toggle formControlName="active">{{ 'register.active' | translate }}</mat-slide-toggle>
            </div>
            <div class="stepper-actions">
              <button mat-button matStepperPrevious type="button">{{ 'register.back' | translate }}</button>
              <button mat-button matStepperNext type="button">{{ 'register.next' | translate }}</button>
            </div>
          </mat-step>

         <mat-step [stepControl]="account" [label]="'register.step_confirmation' | translate">
            <ng-template matStepLabel>{{ 'register.step_confirmation' | translate }}</ng-template>
            
            <div formGroupName="account" class="step-content">
              <div class="terms-section">
                <mat-checkbox formControlName="agreeTerms" color="primary">
                  {{ 'read_and_agree' | translate }}
                  <a href="#" mat-button color="primary">{{ 'terms_of_service' | translate }}</a>
                </mat-checkbox>
                <mat-error *ngIf="account.get('agreeTerms')?.invalid && account.get('agreeTerms')?.touched">
                  {{ 'validations.required' | translate }}
                </mat-error>
              </div>

              <mat-card class="summary-card">
                <mat-card-header>
                  <mat-card-title>{{ 'register.summary' | translate }}</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                  <div class="summary-item">
                    <strong>{{ 'register.name' | translate }}:</strong>
                    {{ personal.get('firstName')?.value }} {{ personal.get('lastName')?.value }}
                  </div>
                  <div class="summary-item">
                    <strong>{{ 'register.email' | translate }}:</strong>
                    {{ professional.get('email')?.value }}
                  </div>
                  <div class="summary-item">
                    <strong>{{ 'register.department' | translate }}:</strong>
                    {{ professional.get('department')?.value }}
                  </div>
                  <div class="summary-item">
                    <strong>{{ 'register.contractType' | translate }}:</strong>
                    {{ professional.get('contractType')?.value }}
                  </div>
                </mat-card-content>
              </mat-card>
            </div>

            <div class="step-actions">
              <button mat-button matStepperPrevious type="button">
                <mat-icon>arrow_back</mat-icon>
                {{ 'register.back' | translate }}
              </button>
              <button 
                mat-raised-button 
                color="primary" 
                type="submit"
                [disabled]="registerForm.invalid || isSubmitting"
                (click)="onSubmit()">
                <mat-icon>check_circle</mat-icon>
                {{ 'register.submit' | translate }}
                <mat-spinner *ngIf="isSubmitting" diameter="20" class="spinner"></mat-spinner>
              </button>
            </div>
          </mat-step>
        </mat-stepper>
      </form>

      <div class="m-t-16">
        {{ 'have_an_account' | translate }}?
        <a routerLink="/auth/login">{{ 'login' | translate }}</a>
      </div>
    </mat-card-content>
  </mat-card>
</div>
      

      <div class="m-t-16">
        {{ 'have_an_account' | translate }}?
        <a routerLink="/auth/login">{{ 'login' | translate }}</a>
      </div>
   
 

