// ============================================================
// users.component.scss
// Design system: Outfit font · indigo-violet brand · 3-level shadow
// ============================================================

$brand-gradient: linear-gradient(135deg, #4338ca 0%, #6d28d9 100%);
$brand-a:  #4338ca;
$brand-b:  #6d28d9;
$bg:       #f4f3fb;
$card:     #ffffff;
$t1:       #1a1035;
$t2:       #4b5068;
$t3:       #9095a8;
$line:     rgba(88, 80, 200, 0.09);
$s1:       0 1px 3px rgba(67,56,202,.06), 0 1px 2px rgba(0,0,0,.03);
$s2:       0 4px 18px rgba(67,56,202,.10), 0 2px 6px rgba(0,0,0,.04);
$s3:       0 16px 48px rgba(67,56,202,.13), 0 4px 16px rgba(0,0,0,.05);
$r-s: 8px;  $r-m: 14px;  $r-l: 20px;

@keyframes up {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: translateY(0); }
}

// ─────────────────────────────────────────────────────────────
// PAGE
// ─────────────────────────────────────────────────────────────
.users-container {
  padding: 28px 32px;
  min-height: 100vh;
  background: $bg;
  background-image:
    radial-gradient(ellipse 55% 35% at 85% 8%,  rgba(99,80,220,.07) 0%, transparent 65%),
    radial-gradient(ellipse 45% 30% at 12% 92%, rgba(109,40,217,.05) 0%, transparent 65%);
  font-family: 'Outfit', sans-serif;
}

.page-header {
  margin-bottom: 26px;
  animation: up .35s ease both;

  h1 {
    font-size: 26px; font-weight: 800;
    color: $t1; margin: 0 0 4px;
    letter-spacing: -.03em;
  }
  .page-description { margin: 0; font-size: 13px; color: $t3; }
}

// ─────────────────────────────────────────────────────────────
// STAT CARDS
// ─────────────────────────────────────────────────────────────
.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 14px;
  margin-bottom: 22px;
  animation: up .38s ease .04s both;

  @media (max-width: 900px) { grid-template-columns: repeat(2,1fr); }
  @media (max-width: 480px) { grid-template-columns: 1fr; }
}

.stat-card {
  background: $card;
  border-radius: $r-m;
  padding: 18px 20px;
  cursor: pointer;
  box-shadow: $s1;
  border: 1.5px solid transparent;
  transition: transform .2s, box-shadow .2s, border-color .2s;
  position: relative; overflow: hidden;

  // 3-px top bar — same accent device used in section labels on view/edit
  &::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 3px; border-radius: $r-m $r-m 0 0;
  }

  &:hover { transform: translateY(-3px); box-shadow: $s2; }

  // per-status colours
  &.pending  { &::before { background: #eab308; } &:hover { border-color: rgba(234,179,8,.2); }
               .icon-tile { background: #fef9c3; mat-icon { color: #a16207; } } }
  &.active   { &::before { background: #22c55e; } &:hover { border-color: rgba(34,197,94,.2); }
               .icon-tile { background: #dcfce7; mat-icon { color: #15803d; } } }
  &.disabled { &::before { background: #ef4444; } &:hover { border-color: rgba(239,68,68,.2); }
               .icon-tile { background: #fee2e2; mat-icon { color: #b91c1c; } } }
  &.locked   { &::before { background: #94a3b8; } &:hover { border-color: rgba(148,163,184,.2); }
               .icon-tile { background: #f1f5f9; mat-icon { color: #64748b; } } }

  .stat-content { display: flex; align-items: center; gap: 14px; }

  // icon tile — same shape used in view's info rows and sidebar stats
  .icon-tile {
    width: 46px; height: 46px; border-radius: $r-s;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    mat-icon { font-size: 21px; height: 21px; width: 21px; }
  }

  .stat-value { font-size: 26px; font-weight: 800; color: $t1; line-height: 1; margin: 0 0 3px; letter-spacing: -.04em; }
  .stat-label { font-size: 11px; color: $t3; margin: 0; font-weight: 500; }
}

// ─────────────────────────────────────────────────────────────
// SEARCH
// ─────────────────────────────────────────────────────────────
.search-section {
  margin-bottom: 18px;
  animation: up .38s ease .08s both;

  .search-field {
    width: 340px; max-width: 100%;

    ::ng-deep {
      .mat-mdc-text-field-wrapper { border-radius: $r-s !important; background: $card; }
      .mdc-notched-outline__leading,
      .mdc-notched-outline__notch,
      .mdc-notched-outline__trailing { border-color: $line !important; border-width: 1.5px !important; }
      .mat-mdc-form-field-icon-prefix mat-icon { color: $t3; font-size: 19px; }
      .mat-mdc-input-element { font-family: 'Outfit', sans-serif; font-size: 14px; color: $t1; }
      &.mat-focused .mdc-notched-outline__leading,
      &.mat-focused .mdc-notched-outline__notch,
      &.mat-focused .mdc-notched-outline__trailing { border-color: $brand-a !important; }
    }
  }
}

// ─────────────────────────────────────────────────────────────
// TABLE CARD
// ─────────────────────────────────────────────────────────────
.table-card {
  background: $card;
  border-radius: $r-l;
  box-shadow: $s3;
  overflow: hidden; position: relative;
  animation: up .38s ease .12s both;

  // ── header strip — identical markup + style as view/edit headers ──
  .table-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 20px 26px;
    background: $brand-gradient;
    position: relative; overflow: hidden;

    &::after {
      content: '';
      position: absolute; inset: 0;
      background:
        radial-gradient(circle at 18% 55%, rgba(255,255,255,.09) 0%, transparent 48%),
        radial-gradient(circle at 82% 18%, rgba(255,255,255,.06) 0%, transparent 38%);
      pointer-events: none;
    }

    h3 { margin: 0; font-size: 16px; font-weight: 700; color: #fff; letter-spacing: -.01em; }
  }

  .table-wrapper { overflow-x: auto; }

  table {
    width: 100%; border-collapse: collapse;

    thead tr { background: rgba(244,243,251,.7); }

    th {
      padding: 11px 16px; text-align: left;
      font-size: 10px; font-weight: 800; color: $t3;
      text-transform: uppercase; letter-spacing: 1.1px;
      white-space: nowrap; border-bottom: 1px solid $line;
    }

    tbody tr {
      border-bottom: 1px solid rgba(88,80,200,.05);
      transition: background .15s;
      &:last-child { border-bottom: none; }
      &:hover { background: rgba(88,80,200,.025); }
    }

    td { padding: 13px 16px; vertical-align: middle; }
  }

  // ── cells ──
  .user-cell { display: flex; align-items: center; gap: 11px; }

  // square avatar tile — consistent with icon tiles everywhere
  .user-avatar {
    width: 36px; height: 36px; border-radius: 9px;
    display: flex; align-items: center; justify-content: center;
    font-size: 12px; font-weight: 800; color: #fff; flex-shrink: 0;
    background: $brand-gradient;
    box-shadow: 0 2px 6px rgba(67,56,202,.22);
    letter-spacing: -.5px;
    transition: transform .2s;
    tr:hover & { transform: scale(1.07); }
  }

  .user-name  { font-size: 13px; font-weight: 700; color: $t1; white-space: nowrap; }
  .user-email { font-size: 11px; color: $t3; white-space: nowrap; }

  .contact-cell {
    .user-phone       { font-size: 13px; font-weight: 500; color: $t2; }
    .user-email-small { font-size: 11px; color: $t3; }
  }

  .department-cell { font-size: 13px; font-weight: 500; color: $t2; }

  // role chip — same visual language as the role card in view sidebar
  .role-badge {
    display: inline-block; padding: 3px 10px; border-radius: 6px;
    font-size: 10px; font-weight: 800; letter-spacing: .6px; text-transform: uppercase;
    background: linear-gradient(135deg, rgba(67,56,202,.08), rgba(109,40,217,.06));
    color: $brand-a; white-space: nowrap;
  }

  // status badge — exact same component as view sidebar
  .status-badge {
    display: inline-flex; align-items: center;
    padding: 4px 12px; border-radius: 20px;
    font-size: 10px; font-weight: 800; letter-spacing: .7px; text-transform: uppercase; white-space: nowrap;

    .status-dot { width: 6px; height: 6px; border-radius: 50%; margin-right: 7px; flex-shrink: 0; }

    &.active   { background: #dcfce7; color: #15803d; .status-dot { background: #22c55e; } }
    &.pending  { background: #fef9c3; color: #a16207; .status-dot { background: #eab308; } }
    &.disabled { background: #fee2e2; color: #b91c1c; .status-dot { background: #ef4444; } }
    &.locked   { background: #f1f5f9; color: #64748b; .status-dot { background: #94a3b8; } }
  }

  // ── action buttons ──
  .actions-cell { display: flex; align-items: center; gap: 7px; flex-wrap: wrap; }

  .action-btn {
    height: 28px; padding: 0 13px; border-radius: 20px;
    font-size: 10px; font-weight: 800; letter-spacing: .4px;
    cursor: pointer; border: none;
    transition: transform .15s, box-shadow .15s;
    white-space: nowrap; font-family: 'Outfit', sans-serif;

    &:hover { transform: translateY(-1px); box-shadow: 0 4px 10px rgba(0,0,0,.1); }

    &.approve { background: #dcfce7; color: #15803d; &:hover { background: #bbf7d0; } }
    &.reject  { background: #fee2e2; color: #b91c1c; &:hover { background: #fecaca; } }
    &.disable { background: #fef9c3; color: #a16207; &:hover { background: #fef08a; } }
    &.enable  { background: linear-gradient(135deg,rgba(67,56,202,.09),rgba(109,40,217,.07)); color: $brand-a;
                &:hover { background: rgba(67,56,202,.15); } }
  }

  .more-btn {
    width: 30px; height: 30px; border-radius: $r-s;
    color: $t3; transition: background .15s, color .15s;
    &:hover { background: linear-gradient(135deg,rgba(67,56,202,.08),rgba(109,40,217,.06)); color: $brand-a; }
  }

  // ── loading ──
  .loading-shade {
    position: absolute; inset: 0;
    background: rgba(255,255,255,.75); backdrop-filter: blur(3px);
    display: flex; align-items: center; justify-content: center;
    ::ng-deep circle { stroke: $brand-a; }
  }

  // ── empty state ──
  .empty-state {
    padding: 80px 24px; text-align: center;
    mat-icon { font-size: 52px; width: 52px; height: 52px; color: $t3; opacity: .4; margin-bottom: 12px; }
    p { margin: 0; font-size: 14px; color: $t3; font-weight: 500; }
  }

  // ── pagination — same button shape as edit form actions ──
  .pagination {
    display: flex; align-items: center; justify-content: space-between;
    padding: 15px 24px; border-top: 1px solid $line;
    background: rgba(244,243,251,.5);
    flex-wrap: wrap; gap: 10px;

    .pagination-info { font-size: 12px; color: $t3; font-weight: 500; }
    .pagination-controls { display: flex; align-items: center; gap: 5px; }

    .page-btn {
      min-width: 34px; height: 34px; padding: 0 9px;
      border-radius: $r-s; font-size: 12px; font-weight: 700;
      color: $t2; border: 1.5px solid $line; background: $card;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      transition: border-color .2s, color .2s, background .2s;
      font-family: 'Outfit', sans-serif;

      &:hover:not([disabled]) { border-color: $brand-a; color: $brand-a; }
      &.active { background: $brand-gradient; color: #fff; border-color: transparent; box-shadow: 0 2px 8px rgba(67,56,202,.28); }
      &[disabled] { opacity: .32; cursor: not-allowed; }

      mat-icon { font-size: 17px; height: 17px; width: 17px; }
    }
  }
}
